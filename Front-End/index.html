<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <title>TalibTimer</title>
    <meta
      name="TalibTimer"
      content="TalibTimer helps users improve their productivity using the Pomodoro technique, offering customisable timers, detailed statistics, reminders, and task lists for optimal time management."
    />

    <!-- Stylesheets -->
    <link rel="stylesheet" href="app-styles.css" />
    <link rel="stylesheet" href="assets/styles/oauth.css" />

    <!-- Core Libraries from cdnjs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

    <!-- FullCalendar from unpkg -->
    <script src="https://unpkg.com/fullcalendar@6.1.8/index.global.min.js"></script>

    <!-- SEO -->
    <link rel="alternate" hreflang="fr" href="https://your-site.com/" />
    <link rel="alternate" hreflang="en" href="https://your-site.com/" />

    <!-- Feather Icons -->
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

    <!-- Ajouter ce script au début du <head> -->
    <script>
      // Intercepter les redirections codées en dur
      (function () {
        // Vérifier les balises meta refresh
        document.addEventListener("DOMContentLoaded", function () {
          const metaTags = document.querySelectorAll(
            'meta[http-equiv="refresh"]'
          );
          metaTags.forEach((tag) => {
            const content = tag.getAttribute("content");
            if (content && content.includes("/login")) {
              tag.setAttribute(
                "content",
                content.replace("/login", "/welcomepage")
              );
            }
          });
        });
      })();
    </script>
  </head>

  <body>
    <!-- Top-nav supprimée - Le hamburger sera créé par JavaScript -->

    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <header id="nav">
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <h1>TalibHub(Beta)</h1>
          <button class="sidebar-close-btn" id="sidebarCloseBtn">×</button>
        </div>
        <nav>
          <!-- Section Analytics -->
          <div class="sidebar-section">
            <h3 class="sidebar-section-title">Analytics</h3>
            <ul class="nav-list">
              <li>
                <a
                  href="#"
                  class="nav-link"
                  data-destination="dashboard"
                  data-translate="nav.dashboard"
                  >Dashboard</a
                >
              </li>
            </ul>
          </div>

          <!-- Section Tools -->
          <div class="sidebar-section">
            <h3 class="sidebar-section-title">Tools</h3>
            <ul class="nav-list">
              <li>
                <a
                  href="#"
                  class="nav-link"
                  data-destination="todoLists"
                  data-translate="nav.todoLists"
                  >Task Lists</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="nav-link"
                  data-destination="apprentissage"
                  data-translate="nav.talibTimer"
                  >Talib Timer</a
                >
                <ul class="subnav">
                  <li>
                    <a
                      href="#"
                      class="nav-link"
                      data-destination="statistics"
                      data-translate="nav.statistics"
                      >Statistics</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </div>

          <!-- Section Islamic -->
          <div class="sidebar-section">
            <h3 class="sidebar-section-title">Islamic</h3>
            <ul class="nav-list">
              <li>
                <a
                  href="#"
                  class="nav-link"
                  data-destination="mosquetime"
                  data-translate="nav.mosquetime"
                  >Mosque Time</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="nav-link"
                  data-destination="salatSurahSelector"
                  data-translate="nav.salatSurahSelector"
                  >Surah Selector</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="nav-link"
                  data-destination="surahmemorization"
                  data-translate="nav.surahmemorization"
                  >Surah Memorisation</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="nav-link"
                  data-destination="duaTimeCalculator"
                  data-translate="nav.duaTimeCalculator"
                  >Dua Time</a
                >
              </li>
            </ul>
          </div>
        </nav>
      </aside>
    </header>

    <section id="welcomepage" class="page">
      <header class="welcomepage-header">
        <h1>TalibHub(Beta)</h1>
        <!-- Language Selector -->
        <section class="language-selector">
          <button class="lang-btn" data-lang="fr" title="French">🇫🇷</button>
          <button class="lang-btn" data-lang="en" title="English">🇬🇧</button>
        </section>
      </header>

      <div class="welcomepage-container">
        <div id="welcomepage-hero" class="welcomepage-hero">
          <h2 data-translate="welcome.title">Welcome to TalibHub</h2>
          <p data-translate="welcome.subtitle">
            Your innovative platform for Islamic learning and practice
          </p>
          <button
            id="welcomepage-getStartedBtn"
            class="welcomepage-btn"
            data-translate="welcome.getStarted"
          >
            Get Started
          </button>
        </div>

        <div id="welcomepage-auth-forms" class="welcomepage-auth-forms hidden">
          <div class="welcomepage-card">
            <div class="welcomepage-tabs">
              <button
                class="welcomepage-tab-btn"
                data-tab="signup"
                data-translate="welcome.signUp"
              >
                Sign Up
              </button>
              <button
                class="welcomepage-tab-btn active"
                data-tab="signin"
                data-translate="welcome.signIn"
              >
                Sign In
              </button>
            </div>
            <div class="welcomepage-tab-content" id="welcomepage-signupTab">
              <form id="welcomepage-signupForm">
                <h3>Sign Up</h3>
                <!-- Hidden honeypot field -->
                <div
                  style="
                    opacity: 0;
                    position: absolute;
                    top: 0;
                    left: 0;
                    height: 0;
                    width: 0;
                    z-index: -1;
                    pointer-events: none;
                  "
                >
                  <input
                    type="text"
                    name="website"
                    id="welcomepage-website"
                    autocomplete="off"
                    tabindex="-1"
                    aria-hidden="true"
                  />
                </div>

                <!-- Hidden field for timing -->
                <input type="hidden" id="form-start-time" value="" />
                <div class="form-grid">
                  <div class="welcomepage-form-group">
                    <label for="welcomepage-username">Username</label>
                    <input type="text" id="welcomepage-username" required />
                  </div>
                  <div class="welcomepage-form-group">
                    <label for="welcomepage-firstName">First Name</label>
                    <input type="text" id="welcomepage-firstName" required />
                  </div>
                  <div class="welcomepage-form-group">
                    <label for="welcomepage-lastName">Last Name</label>
                    <input type="text" id="welcomepage-lastName" required />
                  </div>
                  <div class="welcomepage-form-group">
                    <label for="welcomepage-age">Age</label>
                    <input type="number" id="welcomepage-age" required />
                  </div>
                  <div class="welcomepage-form-group">
                    <label for="welcomepage-gender">Gender</label>
                    <select id="welcomepage-gender" required>
                      <option value="">Select</option>
                      <option value="male">Male</option>
                      <option value="female">Female</option>
                    </select>
                  </div>
                  <div class="welcomepage-form-group">
                    <label for="welcomepage-country">Country</label>
                    <input
                      type="text"
                      id="welcomepage-country"
                      required
                      autocomplete="off"
                    />
                    <div
                      id="country-list"
                      role="listbox"
                      aria-label="Country List"
                    >
                      <!-- Country list items will be dynamically inserted here -->
                    </div>
                  </div>
                  <div class="welcomepage-form-group">
                    <label for="welcomepage-email">Email Address</label>
                    <input type="email" id="welcomepage-email" required />
                  </div>
                  <div class="welcomepage-form-group">
                    <label for="welcomepage-confirmEmail"
                      >Confirm Email Address</label
                    >
                    <input
                      type="email"
                      id="welcomepage-confirmEmail"
                      name="confirmEmail"
                      required
                      autocomplete="off"
                    />
                  </div>
                  <div class="welcomepage-form-group">
                    <label for="welcomepage-password">Password</label>
                    <input type="password" id="welcomepage-password" required />
                  </div>
                  <div class="welcomepage-form-group">
                    <label for="welcomepage-confirmPassword"
                      >Confirm Password</label
                    >
                    <input
                      type="password"
                      id="welcomepage-confirmPassword"
                      required
                    />
                  </div>
                  <div class="welcomepage-form-group terms-group">
                    <div class="welcomepage-form-group terms-group">
                      <div class="terms-checkbox-container">
                        <input
                          type="checkbox"
                          id="welcomepage-terms"
                          name="terms"
                          required
                        />
                        <label for="welcomepage-terms">
                          I agree to the
                          <a
                            href="/terms.html"
                            target="_blank"
                            class="terms-link"
                            style="
                              color: #000;
                              font-size: 1.1rem;
                              font-weight: 500;
                            "
                            >Terms of Service</a
                          >
                        </label>
                      </div>
                    </div>
                  </div>

                  <div class="welcomepage-form-group captcha-group">
                    <label for="welcomepage-captcha"
                      >Security Verification</label
                    >
                    <!-- Container for Turnstile -->
                    <div
                      id="turnstile-container"
                      class="turnstile-container"
                    ></div>

                    <!-- Protection information -->
                    <div class="captcha-info">
                      <small
                        >Protected by Cloudflare Turnstile -
                        <a
                          href="https://www.cloudflare.com/privacypolicy/"
                          target="_blank"
                          >Privacy</a
                        >
                        -
                        <a
                          href="https://www.cloudflare.com/website-terms/"
                          target="_blank"
                          >Terms</a
                        >
                      </small>
                    </div>
                  </div>
                </div>
                <button
                  type="submit"
                  class="welcomepage-btn welcomepage-btn-primary"
                >
                  Create Account
                </button>
              </form>
            </div>
            <div
              class="welcomepage-tab-content active"
              id="welcomepage-signinTab"
            >
              <form id="welcomepage-signinForm">
                <h3>Sign In</h3>
                <div class="form-grid">
                  <div class="welcomepage-form-group">
                    <label for="welcomepage-signin-email">Email Address</label>
                    <input
                      type="email"
                      id="welcomepage-signin-email"
                      required
                    />
                  </div>
                  <div class="welcomepage-form-group">
                    <label for="welcomepage-signin-password">Password</label>
                    <input
                      type="password"
                      id="welcomepage-signin-password"
                      required
                    />
                  </div>
                </div>
                <button
                  type="submit"
                  class="welcomepage-btn welcomepage-btn-primary"
                >
                  Sign In
                </button>
                <p><a href="./forgot-password.html">Forgot password?</a></p>
              </form>
            </div>
          </div>
        </div>
        <div id="welcomepage-mosque-time" class="welcomepage-mosque-time">
          <!-- Mosque Time will be inserted here -->
        </div>
        <div id="welcomepage-features" class="welcomepage-features">
          <h2>Our Main Features</h2>
          <div class="welcomepage-features-grid">
            <div class="welcomepage-feature-card">
              <h3>Talib Timer</h3>
              <p>Optimise your study and practice sessions</p>
            </div>
            <div class="welcomepage-feature-card">
              <h3>Surah Selector</h3>
              <p>Diversify your prayer recitations</p>
            </div>
            <div class="welcomepage-feature-card">
              <h3>Surah Memorisation</h3>
              <p>Maintain your memorisation with spaced repetition</p>
            </div>
            <div class="welcomepage-feature-card">
              <h3>Dua Time Calculator</h3>
              <p>Calculate the last third of the night for invocations</p>
            </div>
            <div class="welcomepage-feature-card">
              <h3>Salat Mosque Time</h3>
              <p>Find congregational prayer times near you</p>
            </div>
            <div class="welcomepage-feature-card">
              <h3>Future Features</h3>
              <p>Many exciting features coming soon!</p>
            </div>
          </div>
        </div>

        <div id="welcomepage-vision" class="welcomepage-vision">
          <h2>Our Vision</h2>
          <p>
            At TalibHub, we believe that technology can enrich and facilitate
            the practice of Islam. Our platform combines practical features with
            an intuitive interface to create a unique and personalised
            experience for each user.
          </p>
        </div>

        <div id="welcomepage-why-choose" class="welcomepage-why-choose">
          <h2>Why Choose TalibHub?</h2>
          <div class="welcomepage-why-choose-grid">
            <div class="welcomepage-why-choose-card">
              <h3>Practical Approach</h3>
              <p>
                We focus on the concrete application of Islamic teachings in
                daily life.
              </p>
            </div>
            <div class="welcomepage-why-choose-card">
              <h3>Personalisation</h3>
              <p>
                Our platform adapts to your lifestyle and personal goals in
                religious practice.
              </p>
            </div>
            <div class="welcomepage-why-choose-card">
              <h3>Community</h3>
              <p>
                Join a global community of Muslims and share your experiences
                and progress.
              </p>
            </div>
            <div class="welcomepage-why-choose-card">
              <h3>Universal Accessibility</h3>
              <p>
                TalibHub is accessible on all devices with a web browser,
                without needing to install a specific application.
              </p>
            </div>
          </div>
        </div>

        <div id="welcomepage-commitment" class="welcomepage-commitment">
          <h2>Our Commitment</h2>
          <p>
            At TalibHub, we are committed to providing a free platform
            accessible to all. Our unique model relies on the generosity of our
            users:
          </p>
          <ul>
            <li>
              All features are free: We believe that access to quality tools for
              the practice of Islam should be universal.
            </li>
            <li>
              Subscriptions for altruists: Our subscriber area is designed for
              those who wish to contribute to the spread and use of TalibHub as
              a common good.
            </li>
            <li>
              Community development: We encourage contribution and feedback from
              our user community to continuously improve our services.
            </li>
          </ul>
        </div>
      </div>

      <footer class="welcomepage-footer">
        <p>
          &copy;
          <script>
            document.write(new Date().getFullYear());
          </script>
          TalibHub. All rights reserved.
        </p>
      </footer>
    </section>

    <section id="dashboard" class="page page-no-welcome">
      <main class="dashboard-main-content">
        <!-- Header moderne comme les autres sections -->
        <div class="dashboard-header">
          <h1 data-translate="dashboard.welcomeTitle">
            Welcome to Your Dashboard
          </h1>
        </div>

        <!-- Boutons TopNav intégrés dans le Dashboard -->
        <div class="dashboard-topnav-buttons">
          <a
            href="#"
            id="dashboardMessagingButton"
            class="dashboard-messaging-link"
            data-destination="messaging"
            data-translate-title="messaging.viewTitle"
            title="View messages"
          >
            <i data-feather="mail" class="dashboard-messaging-icon"></i>
            <span data-translate="messaging.buttonText">Messagerie</span>
            <span
              id="dashboard-messaging-count"
              class="dashboard-messaging-count"
              style="display: none"
              >0</span
            >
          </a>

          <div class="dashboard-profile-section">
            <button
              id="dashboard-profile-button"
              class="dashboard-profile-button"
            >
              <i
                data-feather="settings"
                class="dashboard-profile-settings-icon"
              ></i>
              <span id="dashboard-username-display">User</span>
              <i class="dashboard-profile-icon">▼</i>
            </button>

            <!-- Profile dropdown menu -->
            <div
              id="dashboard-profile-dropdown"
              class="dashboard-profile-dropdown"
            >
              <a
                href="#"
                class="dropdown-item"
                data-destination="profile"
                data-translate="nav.profile"
                >Profile</a
              >
              <a
                href="#"
                class="dropdown-item"
                data-destination="price"
                data-translate="nav.contribution"
                >Contribution</a
              >
              <a
                href="#"
                class="dropdown-item"
                data-destination="contactform"
                data-translate="nav.contact"
                >Contact</a
              >
              <a
                href="#"
                class="dropdown-item"
                data-destination="aboutus"
                data-translate="nav.aboutUs"
                >About Us</a
              >
              <div class="dropdown-divider"></div>

              <!-- Toggle theme -->
              <div class="dropdown-item">
                <div class="theme-toggle">
                  <span data-translate="nav.theme">Theme</span>
                  <label class="switch">
                    <input type="checkbox" id="dashboard-theme-toggle" />
                    <span class="slider round"></span>
                  </label>
                </div>
              </div>

              <!-- Language selector -->
              <div class="dropdown-item">
                <div class="language-selector">
                  <button class="lang-btn" data-lang="fr">🇫🇷</button>
                  <button class="lang-btn" data-lang="en">🇬🇧</button>
                </div>
              </div>

              <div class="dropdown-divider"></div>
              <a
                href="#"
                class="dropdown-item"
                id="dashboard-logoutBtn"
                data-translate="nav.logout"
                >Logout</a
              >
            </div>
          </div>
        </div>
        <div class="dashboard-card-grid">
          <div class="dashboard-card" data-destination="mosquetime">
            <img
              src="./assets/icons/DashboardIcones/mosque_icone1.svg"
              alt="Mosque Icon"
            />
            <h2 data-translate="dashboard.mosqueTime">Salat Mosque Time</h2>
          </div>
          <div class="dashboard-card" data-destination="salatSurahSelector">
            <img
              src="./assets/icons/DashboardIcones/carpet_icone1.svg"
              alt="Carpet Icon"
            />
            <h2 data-translate="dashboard.surahSelector">Surah Selector</h2>
          </div>
          <div class="dashboard-card" data-destination="surahmemorization">
            <img
              src="./assets/icons/DashboardIcones/brain_icone1.svg"
              alt="Surah Memorisation Icon"
            />
            <h2 data-translate="dashboard.surahMemorisation">
              Surah Memorisation
            </h2>
          </div>
          <div class="dashboard-card" data-destination="duaTimeCalculator">
            <img
              src="./assets/icons/DashboardIcones/hands_prayer_icon1.svg"
              alt="Dua Icon"
            />
            <h2 data-translate="dashboard.duaTime">Dua Time</h2>
          </div>
          <div class="dashboard-card" data-destination="apprentissage">
            <img
              src="./assets/icons/DashboardIcones/clock_icone1.svg"
              alt="Clock Icon"
            />
            <h2 data-translate="dashboard.talibTimer">Talib Timer</h2>
          </div>
        </div>
      </main>
    </section>

    <section id="apprentissage" class="page page-no-welcome">

      <!-- Modern Header -->
      <div class="apprentissage-header">
        <h1 data-translate="apprentissage.title">Learning</h1>
      </div>

      <div class="apprentissage-main-container">
        <!-- Section Task Selection (en haut, pleine largeur) -->
        <div class="apprentissage-top-section">
          <div class="timer">
            <h2 data-translate="apprentissage.taskSelection">
              Task Selection and Session
            </h2>
            <div class="timer-content">
              <select id="task-select">
                <option value="" data-translate="apprentissage.selectTask">
                  Select a task
                </option>
              </select>
              <div id="session-info">
                <p>
                  <span data-translate="apprentissage.previousSession"
                    >Previous session:</span
                  >
                  <span id="previous-sessions-count">0</span>
                </p>
                <p>
                  <span data-translate="apprentissage.currentSession"
                    >Current session:</span
                  >
                  <span id="current-session-id">0</span>
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Section 2x2 pour les autres containers -->
        <div class="apprentissage-grid-section">
          <!-- Focus Timer -->
          <div class="timer">
            <h2 data-translate="apprentissage.focusTimer">Focus Timer</h2>
            <div class="timer-content">
              <!-- Div that displays the timer -->
              <div id="focus-timer-control"></div>
              <div class="button-group">
                <button
                  class="control-button"
                  id="start_stop"
                  data-action="toggle-timer"
                >
                  <img
                    src="./assets/icons/ButtonsIcone/Start_icone.png"
                    alt="Start icon"
                  />
                </button>
                <button
                  class="control-button"
                  id="reset"
                  data-action="reset-timer"
                >
                  <img
                    src="./assets/icons/ButtonsIcone/Restart_icone.png"
                    alt="Restart icon"
                  />
                </button>
                <button
                  id="save-button-session"
                  class="control-button"
                  data-action="save-session-data"
                >
                  <img
                    src="./assets/icons/ButtonsIcone/Save_icone.png"
                    alt="Save icon"
                  />
                </button>
              </div>
            </div>
          </div>

          <!-- Stopwatch -->
          <div class="timer">
            <h2 data-translate="apprentissage.stopwatch">Stopwatch</h2>
            <div class="timer-content">
              <p id="stopwatch-time" class="time_displayed">00:00:00</p>
              <div class="button-group">
                <button
                  class="control-button"
                  id="stopwatch-start"
                  data-action="toggle-stopwatch"
                >
                  <img
                    src="./assets/icons/ButtonsIcone/Start_icone.png"
                    alt="Start Icon"
                  />
                </button>
                <button
                  class="control-button"
                  id="stopwatch-reset"
                  data-action="reset-stopwatch"
                >
                  <img
                    src="./assets/icons/ButtonsIcone/Restart_icone.png"
                    alt="Restart Icon"
                  />
                </button>
                <button
                  id="save-button-session"
                  class="control-button"
                  data-action="save-session-data"
                >
                  <img
                    src="./assets/icons/ButtonsIcone/Save_icone.png"
                    alt="Save Icon"
                  />
                </button>
              </div>
            </div>
          </div>

          <!-- Manual Study Time -->
          <div class="timer">
            <h2 data-translate="apprentissage.manualStudyTime">
              Manual Study Time
            </h2>
            <div class="timer-content">
              <div id="manual-time-container">
                <div>
                  <label for="manual-hours">Hours:</label>
                  <input
                    type="number"
                    id="manual-hours"
                    min="0"
                    placeholder="0"
                  />
                </div>
                <div>
                  <label for="manual-minutes">Minutes:</label>
                  <input
                    type="number"
                    id="manual-minutes"
                    min="0"
                    max="59"
                    placeholder="0"
                  />
                </div>
              </div>
              <p class="total-time">
                <span data-translate="apprentissage.totalWorkTime"
                  >Total Work Time:</span
                >
                <span id="total-work-time">00:00:00</span>
              </p>
              <div class="button-group">
                <button
                  id="save-button-session"
                  class="control-button"
                  data-action="save-session-data"
                >
                  <img
                    src="./assets/icons/ButtonsIcone/Save_icone.png"
                    alt="Save Icon"
                  />
                </button>
              </div>
            </div>
          </div>

          <!-- Counter -->
          <div class="timer">
            <h2 data-translate="apprentissage.counter">Counter</h2>
            <div class="timer-content">
              <p id="counter-value">0</p>
              <div class="button-group">
                <button
                  class="counter-button"
                  data-action="change-counter"
                  data-value="-1"
                >
                  -1
                </button>
                <button
                  class="counter-button"
                  data-action="change-counter"
                  data-value="1"
                >
                  +1
                </button>
                <button
                  class="counter-button"
                  data-action="change-counter"
                  data-value="3"
                >
                  +3
                </button>
                <button
                  class="counter-button"
                  data-action="change-counter"
                  data-value="5"
                >
                  +5
              </button>
              <button
                class="counter-button"
                data-action="change-counter"
                data-value="10"
              >
                +10
              </button>
              <button
                id="save-button-session"
                class="counter-button"
                data-action="save-session-data"
              >
                <img
                  src="./assets/icons/ButtonsIcone/Save_icone.png"
                  alt="Save Icon"
                />
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="statistics" class="page page-no-welcome">
      <h1 data-translate="statistics.title">Statistics</h1>
      <div class="statistics-container">
        <!-- Daily Statistics -->
        <div class="chart-section">
          <div class="stats-header">
            <div class="title-area">
              <h2 data-translate="statistics.dailyStats">Daily Statistics</h2>
            </div>
            <div class="period-navigation" data-period="daily">
              <button class="nav-btn prev">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
              </button>
              <span id="daily-period" class="period-display"></span>
              <button class="nav-btn next">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
              </button>
            </div>
          </div>
          <div class="chart-content">
            <div class="chart-wrapper">
              <canvas id="dailyChart"></canvas>
            </div>
            <div class="task-details-section" id="dailyTaskDetails">
              <table class="task-details-table">
                <thead>
                  <tr>
                    <th data-translate="statistics.task">Task</th>
                    <th data-translate="statistics.timeMinutes">Time (min)</th>
                    <th data-translate="statistics.counts">Counts</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
            <button class="toggle-details-btn">
              <span data-translate="statistics.viewDetails">View details</span>
              <svg width="12" height="12" viewBox="0 0 24 24">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </button>
          </div>
        </div>

        <!-- Weekly Statistics -->
        <div class="chart-section">
          <div class="stats-header">
            <div class="title-area">
              <h2 data-translate="statistics.weeklyStats">Weekly Statistics</h2>
            </div>
            <div class="period-navigation" data-period="weekly">
              <button class="nav-btn prev">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
              </button>
              <span id="weekly-period" class="period-display"></span>
              <button class="nav-btn next">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
              </button>
            </div>
          </div>
          <div class="chart-content">
            <div class="chart-wrapper">
              <canvas id="weeklyChart"></canvas>
            </div>
            <div class="task-details-section" id="weeklyTaskDetails">
              <table class="task-details-table">
                <thead>
                  <tr>
                    <th data-translate="statistics.task">Task</th>
                    <th data-translate="statistics.timeMinutes">Time (min)</th>
                    <th data-translate="statistics.counts">Counts</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
            <button class="toggle-details-btn">
              <span data-translate="statistics.viewDetails">View details</span>
              <svg width="12" height="12" viewBox="0 0 24 24">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </button>
          </div>
        </div>

        <!-- Monthly Statistics -->
        <div class="chart-section">
          <div class="stats-header">
            <div class="title-area">
              <h2 data-translate="statistics.monthlyStats">
                Monthly Statistics
              </h2>
            </div>
            <div class="period-navigation" data-period="monthly">
              <button class="nav-btn prev">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
              </button>
              <span id="monthly-period" class="period-display"></span>
              <button class="nav-btn next">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
              </button>
            </div>
          </div>
          <div class="chart-content">
            <div class="chart-wrapper">
              <canvas id="monthlyChart"></canvas>
            </div>
            <div class="task-details-section" id="monthlyTaskDetails">
              <table class="task-details-table">
                <thead>
                  <tr>
                    <th data-translate="statistics.task">Task</th>
                    <th data-translate="statistics.timeMinutes">Time (min)</th>
                    <th data-translate="statistics.counts">Counts</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
            <button class="toggle-details-btn">
              <span data-translate="statistics.viewDetails">View details</span>
              <svg width="12" height="12" viewBox="0 0 24 24">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </button>
          </div>
        </div>

        <!-- Yearly Statistics -->
        <div class="chart-section">
          <div class="stats-header">
            <div class="title-area">
              <h2 data-translate="statistics.yearlyStats">Yearly Statistics</h2>
            </div>
            <div class="period-navigation" data-period="yearly">
              <button class="nav-btn prev">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
              </button>
              <span id="yearly-period" class="period-display"></span>
              <button class="nav-btn next">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
              </button>
            </div>
          </div>
          <div class="chart-content">
            <div class="chart-wrapper">
              <canvas id="yearlyChart"></canvas>
            </div>
            <div class="task-details-section" id="yearlyTaskDetails">
              <table class="task-details-table">
                <thead>
                  <tr>
                    <th data-translate="statistics.task">Task</th>
                    <th data-translate="statistics.timeMinutes">Time (min)</th>
                    <th data-translate="statistics.counts">Counts</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
            <button class="toggle-details-btn">
              <span data-translate="statistics.viewDetails">View details</span>
              <svg width="12" height="12" viewBox="0 0 24 24">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </button>
          </div>
        </div>

        <!-- Bouton de suppression de l'historique complet -->
        <div class="delete-history-container">
          <button
            id="delete-all-history-btn"
            class="delete-history-btn"
            data-translate-title="statistics.deleteAllHistory"
            title="Supprimer tout l'historique"
          >
            <svg
              width="40"
              height="40"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="3 6 5 6 21 6"></polyline>
              <path
                d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
              ></path>
              <line x1="10" y1="11" x2="10" y2="17"></line>
              <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
          </button>
        </div>
      </div>
    </section>

    <section id="todoLists" class="page page-no-welcome">
      <h1 data-translate="todoLists.title">Task List</h1>
      <div class="todo-card">
        <div class="todo-card-header">
          <div class="todo-card-header-content">
            <h2 class="todo-card-title">
              <span data-translate="todoLists.myTasks">My Tasks</span>
              <span id="tasks-counter" class="tasks-counter">(0)</span>
            </h2>
            <div class="todo-header-actions">
              <label class="select-all-container">
                <input
                  type="checkbox"
                  id="select-all-tasks"
                  class="todo-checkbox"
                />
                <span
                  class="select-all-label"
                  data-translate="todoLists.selectAll"
                  >Select All</span
                >
              </label>
              <button
                id="delete-selected"
                class="todo-delete-selected-btn"
                disabled
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path
                    d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                  ></path>
                </svg>
                <span data-translate="todoLists.deleteSelected"
                  >Delete Selected</span
                >
              </button>
            </div>
          </div>
        </div>
        <div class="todo-card-content">
          <div class="todo-input-group">
            <input
              type="text"
              id="todo-new-task"
              class="todo-input"
              data-translate-placeholder="todoLists.addTaskPlaceholder"
              placeholder="Add a new task"
            />
            <button id="todo-add-task" class="todo-btn">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              <span class="sr-only" data-translate="todoLists.addTaskBtn"
                >Add a Task</span
              >
            </button>
          </div>
          <ul id="todo-task-list" class="todo-list">
            <!-- Tasks will be dynamically generated here -->
          </ul>
        </div>
      </div>
    </section>

    <section id="surahmemorization" class="page page-no-welcome">
      <!-- Header simple comme profile -->
      <div class="surahmemorization-header">
        <h1 data-translate="surahmemorization.title">Surah Memorisation</h1>
      </div>

      <div id="quran-app-container">
        <!-- Navigation -->
        <div class="quran-app-nav">
          <button
            id="quran-app-nav-button-select"
            class="quran-app-nav-button"
            data-target="select"
            data-translate="surahmemorization.selectSurah"
          >
            Select Surah
          </button>
          <button
            id="quran-app-nav-button-revise"
            class="quran-app-nav-button"
            data-target="revise"
            data-translate="surahmemorization.revise"
          >
            Revise
          </button>
          <button
            id="quran-app-nav-button-history"
            class="quran-app-nav-button"
            data-target="history"
            data-translate="surahmemorization.history"
          >
            History
          </button>
        </div>

        <!-- Section Select Surahs -->
        <div id="surahmemorization-select" class="quran-app-section">
          <h2
            class="surahmemorization-title"
            data-translate="surahmemorization.selectForRevision"
          >
            Select Surahs for Revision
          </h2>

          <!-- Search and Filter -->
          <div class="surahmemorization-search-filter">
            <input
              type="text"
              id="surahmemorization-search"
              class="surahmemorization-input"
              placeholder="Search Surahs"
              data-translate="surahmemorization.searchSurahs"
            />
            <select
              id="surahmemorization-filter"
              class="surahmemorization-select"
            >
              <option
                value="default"
                data-translate="surahmemorization.filterDefault"
              >
                Default
              </option>
              <option
                value="memorization"
                data-translate="surahmemorization.filterMemorization"
              >
                By Memorisation Level
              </option>
              <option
                value="alphabetical"
                data-translate="surahmemorization.filterAlphabetical"
              >
                Alphabetical Order
              </option>
              <option
                value="numerical"
                data-translate="surahmemorization.filterNumerical"
              >
                Numerical Order
              </option>
            </select>
          </div>

          <!-- List of Surahs with Scroll Box -->
          <div id="surahmemorization-list-container">
            <div class="surahmemorization-headers">
              <div class="header-left">
                <span data-translate="surahmemorization.headerSurahs"
                  >Surahs</span
                >
              </div>
              <div class="header-center">
                <span data-translate="surahmemorization.headerLevel"
                  >Level</span
                >
              </div>
              <div class="header-right">
                <span data-translate="surahmemorization.headerLastRevised"
                  >Last Revised</span
                >
              </div>
            </div>

            <div id="surahmemorization-list">
              <!-- List items will be injected here by JavaScript -->
            </div>
          </div>

          <!-- Actions -->
          <div class="surahmemorization-summary">
            <!--<button
              id="surahmemorization-toggle-all"
              class="surahmemorization-button"
            >
              Select All
            </button> -->
            <span
              id="surahmemorization-count"
              class="surahmemorization-count"
              data-translate="surahmemorization.surahsSelected"
              data-count="0"
            >
              0 surahs selected
            </span>
            <!-- Start Revision Button -->
            <button
              id="surahmemorization-start"
              class="surahmemorization-button"
              data-translate="surahmemorization.startRevision"
              disabled
            >
              Start Revision
            </button>
          </div>
        </div>

        <div
          id="surahmemorization-revise"
          class="quran-app-section"
          style="display: none"
        >
          <h1
            id="surahmemorization-current-title"
            class="surahmemorization-title"
          ></h1>
          <p id="surahmemorization-progress"></p>
          <div class="surahmemorization-progress-bar"></div>
          <div
            id="surahmemorization-text"
            class="surahmemorization-text"
            style="display: none"
          ></div>
          <button
            id="surahmemorization-toggle-text"
            data-translate="surahmemorization.showText"
          >
            <span class="icon">👁</span> Show Text
          </button>
          <!-- Removal of navigation buttons -->
          <!-- 
                <div class="surahmemorization-navigation">
                    <button id="surahmemorization-prev">← Previous</button>
                    <button id="surahmemorization-skip">Skip</button>
                    <button id="surahmemorization-next">Next →</button>
                </div>
                -->
          <h2
            style="text-align: center; margin-top: 20px"
            data-translate="surahmemorization.rateMemorization"
          >
            How do you rate your memorisation of this surah?
          </h2>
          <div id="surahmemorization-evaluation">
            <button
              class="surahmemorization-eval-btn"
              data-level="Strong"
              data-translate="surahmemorization.strong"
            >
              Strong
            </button>
            <button
              class="surahmemorization-eval-btn"
              data-level="Good"
              data-translate="surahmemorization.good"
            >
              Good
            </button>
            <button
              class="surahmemorization-eval-btn"
              data-level="Moderate"
              data-translate="surahmemorization.moderate"
            >
              Moderate
            </button>
            <button
              class="surahmemorization-eval-btn"
              data-level="Weak"
              data-translate="surahmemorization.weak"
            >
              Weak
            </button>
          </div>
        </div>

        <div
          id="surahmemorization-history"
          class="quran-app-section"
          style="display: none"
        >
          <h1
            class="surahmemorization-title"
            data-translate="surahmemorization.revisionHistory"
          >
            Revision History
          </h1>
          <!-- Filter -->
          <div class="surahmemorization-filter">
            <select
              id="surahmemorization-history-filter"
              class="surahmemorization-select"
            >
              <option value="all" data-translate="surahmemorization.allLevels">
                All levels
              </option>
              <option value="strong" data-translate="surahmemorization.strong">
                Strong
              </option>
              <option value="good" data-translate="surahmemorization.good">
                Good
              </option>
              <option
                value="moderate"
                data-translate="surahmemorization.moderate"
              >
                Moderate
              </option>
              <option value="weak" data-translate="surahmemorization.weak">
                Weak
              </option>
            </select>
          </div>

          <!-- Charts -->
          <div class="surahmemorization-charts">
            <div class="chart-container">
              <h3
                class="chart-title"
                data-translate="surahmemorization.distributionLevels"
              >
                Distribution of Memorisation Levels
              </h3>
              <div class="chart-area">
                <canvas id="surahmemorization-performance-chart"></canvas>
              </div>
            </div>
          </div>
          <table
            id="surahmemorization-history-table"
            class="surahmemorization-table"
          >
            <thead>
              <tr>
                <th data-translate="surahmemorization.tableHeaderName">
                  Surah Name
                </th>
                <th data-translate="surahmemorization.tableHeaderNumber">
                  Number
                </th>
                <th data-translate="surahmemorization.tableHeaderDate">
                  Revision Date
                </th>
                <th data-translate="surahmemorization.tableHeaderLevel">
                  Level
                </th>
                <th data-translate="surahmemorization.tableHeaderNext">
                  Next Revision
                </th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div class="surahmemorization-actions">
            <button
              id="surahmemorization-export"
              class="surahmemorization-button"
              data-translate="surahmemorization.export"
            >
              Export Data
            </button>
            <button
              id="surahmemorization-clear"
              class="surahmemorization-button"
              data-translate="surahmemorization.clearHistory"
            >
              Clear History
            </button>
          </div>
        </div>
      </div>
    </section>

    <section id="mosquetime" class="page page-no-welcome">
      <h1 data-translate="mosquetime.title">Mosque Prayer Time</h1>
      <div class="mosquetime-card">
        <header class="mosquetime-header">
          <h1 class="mosquetime-title" data-translate="mosquetime.headerTitle">
            Congregational Prayer Times at the Mosque
          </h1>
          <p class="mosquetime-subtitle" data-translate="mosquetime.subtitle">
            Find congregational prayer times in mosques near you
          </p>
        </header>

        <div class="mosquetime-content">
          <div class="mosquetime-location-search">
            <button
              id="mosquetime-use-location"
              class="mosquetime-button"
              data-translate="mosquetime.useLocation"
            >
              <i class="fas fa-map-marker-alt"></i> Use my location
            </button>
            <select id="mosquetime-location-select" class="mosquetime-select">
              <option value="" data-translate="mosquetime.selectCity">
                Select a city
              </option>
            </select>
            <button
              id="mosquetime-search"
              class="mosquetime-button"
              data-translate="mosquetime.search"
            >
              Search
            </button>
          </div>

          <div
            id="mosquetime-loading"
            style="display: none"
            data-translate="mosquetime.loading"
          >
            Loading prayer times, please wait...
          </div>

          <div
            id="mosquetime-error"
            class="mosquetime-error"
            style="display: none"
          ></div>

          <div class="mosquetime-date-display">
            <h2 id="mosquetime-city-date"></h2>
          </div>

          <div class="mosquetime-tabs">
            <div
              class="mosquetime-tab active"
              data-tab="single"
              data-translate="mosquetime.singleMosque"
            >
              Single Mosque
            </div>
            <div
              class="mosquetime-tab"
              data-tab="all"
              data-translate="mosquetime.allMosques"
            >
              All Mosques
            </div>
          </div>

          <!-- Single Mosque View -->
          <div
            id="mosquetime-single-mosque"
            class="mosquetime-tab-content"
            style="display: block"
          >
            <select id="mosquetime-mosque-select" class="mosquetime-select">
              <option value="" data-translate="mosquetime.selectMosque">
                Select a mosque
              </option>
            </select>
            <div id="mosquetime-single-content"></div>
          </div>

          <!-- All Mosques View -->
          <div
            id="mosquetime-all-mosques"
            class="mosquetime-tab-content"
            style="display: none"
          >
            <div class="mosquetime-sort-buttons">
              <button id="mosquetime-sort-asc" class="mosquetime-button">
                A to Z
              </button>
              <button id="mosquetime-sort-desc" class="mosquetime-button">
                Z to A
              </button>
              <button id="mosquetime-sort-nearest" class="mosquetime-button">
                Nearest
              </button>
            </div>
            <div id="mosquetime-all-mosques-list">
              <!-- Mosque cards will be added dynamically -->
            </div>
          </div>

          <p
            class="mosquetime-disclaimer"
            data-translate="mosquetime.disclaimer"
          >
            These times correspond to congregational prayers at the mosque and
            may differ from individual prayer times.
          </p>
        </div>
      </div>
    </section>

    <section id="messaging" class="page page-no-welcome">
      <div class="messaging-container">
        <h1 class="messaging-title" data-translate="messaging.title">
          Messagerie
        </h1>
        <div class="messaging-card">
          <div class="messaging-card-header">
            <div class="messaging-actions">
              <button
                id="mark-all-read-btn"
                class="messaging-action-btn"
                data-translate="messaging.markAllRead"
                title="Tout marquer comme lu"
              >
                <i data-feather="check-circle"></i>
              </button>
              <button
                id="delete-read-btn"
                class="messaging-action-btn"
                data-translate="messaging.clearRead"
                title="Supprimer les lus"
              >
                <i data-feather="trash-2"></i>
              </button>
            </div>
          </div>
          <div class="messaging-card-content">
            <ul id="messaging-list" class="messaging-list">
              <!-- Messages will be inserted here dynamically -->
            </ul>
          </div>
        </div>
      </div>
      <template id="message-template">
        <li class="message-item">
          <div class="message-content">
            <div class="message-icon"></div>
            <div class="message-text">
              <h4 class="message-title"></h4>
              <p class="message-body"></p>
              <p class="message-date"></p>
            </div>
          </div>
          <div class="message-actions">
            <button
              class="message-read-btn"
              data-translate="messaging.markAsRead"
            >
              Marquer comme lu
            </button>
            <button class="message-delete-btn">
              <i data-feather="x" class="message-delete-icon"></i>
            </button>
          </div>
        </li>
      </template>
    </section>

    <section id="profile" class="page page-no-welcome">
      <h1 data-translate="profile.title">Profile</h1>
      <div id="profileForm">
        <h2 data-translate="profile.personalInfo">Personal Information</h2>
        <form>
          <label for="usernameprofil" data-translate="profile.username"
            >Username:</label
          >
          <input
            type="text"
            id="usernameprofil"
            name="pseudo"
            data-translate-placeholder="profile.countryPlaceholder"
            placeholder="À compléter"
          />

          <label for="last-nameprofil" data-translate="profile.lastName"
            >Last Name:</label
          >
          <input
            type="text"
            id="last-nameprofil"
            name="last-name"
            data-translate-placeholder="profile.lastNamePlaceholder"
            placeholder="Last Name"
            required
          />

          <label for="first-nameprofil" data-translate="profile.firstName"
            >First Name:</label
          >
          <input
            type="text"
            id="first-nameprofil"
            name="first-name"
            data-translate-placeholder="profile.firstNamePlaceholder"
            placeholder="First Name"
            required
          />

          <label for="ageprofil" data-translate="profile.age">Age:</label>
          <input
            type="number"
            id="ageprofil"
            name="age"
            data-translate-placeholder="profile.countryPlaceholder"
            placeholder="À compléter"
          />

          <label for="genderprofil" data-translate="profile.gender"
            >Gender:</label
          >
          <select id="genderprofil" name="gender">
            <option value="" data-translate="profile.countryPlaceholder">
              À compléter
            </option>
            <option value="male" data-translate="profile.male">Male</option>
            <option value="female" data-translate="profile.female">
              Female
            </option>
          </select>

          <label for="emailprofil" data-translate="profile.emailAddress"
            >Email Address:</label
          >
          <input
            type="email"
            id="emailprofil"
            name="email"
            data-translate-placeholder="profile.emailPlaceholder"
            placeholder="Email Address"
            required
          />

          <label for="countryprofil" data-translate="profile.country"
            >Country:</label
          >
          <input
            type="text"
            id="countryprofil"
            name="country"
            data-translate-placeholder="profile.countryPlaceholder"
            placeholder="Country"
          />

          <button type="submit" data-translate="profile.update">Update</button>
        </form>
      </div>
      <div id="passwordChangeForm">
        <h2 data-translate="profile.changePassword">Change Password</h2>
        <form>
          <label for="current-password" data-translate="profile.currentPassword"
            >Current Password:</label
          >
          <input
            type="password"
            id="current-password"
            name="current-password"
            required
          />

          <label for="new-password" data-translate="profile.newPassword"
            >New Password:</label
          >
          <input
            type="password"
            id="new-password"
            name="new-password"
            required
          />

          <label
            for="confirm-new-password"
            data-translate="profile.confirmNewPassword"
            >Confirm New Password:</label
          >
          <input
            type="password"
            id="confirm-new-password"
            name="confirm-new-password"
            required
          />

          <label>
            <input type="checkbox" id="showNewPasswordToggle" />
            <span data-translate="profile.showPassword">Show Password</span>
          </label>

          <button type="submit" data-translate="profile.changePasswordBtn">
            Change Password
          </button>
        </form>
      </div>
    </section>

    <section id="salatSurahSelector" class="page page-no-welcome">

      <!-- Header principal de la page -->
      <div class="surahselector-header">
        <h1 data-translate="surahselector.title">Surah Selector</h1>
      </div>

      <!-- Container pour centrer les cartes -->
      <div class="surahselector-container">
        <!-- 1. Selection of Surahs to Recite (en premier) -->
        <div class="surahselector-card">
          <h2 data-translate="surahselector.selectionToRecite">
            Selection of Surahs to Recite
          </h2>
          <div>
            <div id="sourateList">
              <!-- The list of surahs will be dynamically generated here -->
            </div>
            <button
              data-action="save-known-sourates"
              data-translate="surahselector.saveToRecite"
            >
              Save Surahs to Recite
            </button>
          </div>
        </div>

        <!-- 2. Recitation Statistics (en deuxième) -->
        <div class="surahselector-card">
          <h2 data-translate="surahselector.recitationStats">
            Recitation Statistics
          </h2>
          <div>
            <div id="knownSouratesCount">
              <span data-translate="surahselector.surahsToRecite"
                >Surahs to Recite:</span
              >
              0
            </div>
            <div id="recitationProgress">
              <span data-translate="surahselector.progress">Progress:</span> 0 /
              0
              <span data-translate="surahselector.surahsRecited"
                >surahs recited</span
              >
            </div>
            <div id="recitationCyclesCount">
              <span data-translate="surahselector.completeCycles"
                >Complete Recitation Cycles:</span
              >
              0
            </div>
          </div>
        </div>

        <!-- 3. Selection for Salat (en troisième) -->
        <div class="surahselector-card">
          <h2 data-translate="surahselector.selectionForSalat">
            Selection for Salat
          </h2>
          <div>
            <button
              data-action="select-random-sourates"
              data-translate="surahselector.startPraying"
            >
              Start Praying
            </button>
            <div>
              <p>
                <span data-translate="surahselector.firstRaka">1st raka:</span>
                <span id="firstRaka"></span>
              </p>
              <p>
                <span data-translate="surahselector.secondRaka">2nd raka:</span>
                <span id="secondRaka"></span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="duaTimeCalculator" class="page page-no-welcome">
      <h1 data-translate="duaTimeCalculator.title">Dua Time Calculator</h1>
      <div class="dua-main-content">
        <div class="dua-calculator-row">
        <div class="dua-calculator-card">
          <h2
            class="dua-calculator-title"
            data-translate="duaTimeCalculator.calculate"
          >
            Calculate Last Third of the Night for Dua
          </h2>
          <div class="dua-calculator-content">
            <button
              id="duaLocationBtn"
              class="dua-btn"
              data-action="get-dua-location"
              data-translate="duaTimeCalculator.useLocation"
            >
              Use My Location
            </button>
            <label
              for="duaCityInput"
              class="dua-input-label"
              data-translate="duaTimeCalculator.enterCity"
            >
              Or enter a city:
            </label>
            <input
              type="text"
              id="duaCityInput"
              class="dua-input-field"
              placeholder="Enter city"
            />
            <button
              id="duaCitySubmitBtn"
              class="dua-btn"
              data-action="use-dua-city"
              data-translate="duaTimeCalculator.submit"
            >
              Submit
            </button>
            <label
              for="duaMethodSelect"
              class="dua-input-label"
              data-translate="duaTimeCalculator.calculationMethod"
            >
              Calculation Method:
            </label>
            <select id="duaMethodSelect" class="dua-select-field">
              <option value="3">Muslim World League</option>
              <option value="2">Islamic Society of North America</option>
              <option value="5">Egyptian General Authority of Survey</option>
              <option value="7">Umm Al-Qura University, Makkah</option>
              <option value="1">University of Islamic Sciences, Karachi</option>
              <option value="6">
                Institute of Geophysics, University of Tehran
              </option>
              <option value="17">Shia Ithna-Ashari, Leva Institute, Qum</option>
              <option value="8">Gulf Region</option>
              <option value="9">Kuwait</option>
              <option value="10">Qatar</option>
              <option value="11">
                Majlis Ugama Islam Singapura, Singapore
              </option>
              <option value="12">
                Union of Islamic Organizations of France
              </option>
              <option value="13">Diyanet İşleri Başkanlığı, Turkey</option>
              <option value="18">
                Spiritual Administration of Muslims of Russia
              </option>
              <option value="15">Moonsighting Committee</option>
              <option value="14">Dubai, UAE</option>
              <option value="19">
                Jabatan Kemajuan Islam Malaysia (JAKIM)
              </option>
              <option value="16">Tunisia</option>
              <option value="20">Algeria</option>
              <option value="21">
                Ministry of Religious Affairs of the Republic of Indonesia
              </option>
              <option value="22">Morocco</option>
              <option value="23">Islamic Community of Lisbon (Portugal)</option>
              <option value="24">Custom</option>
            </select>
            <div id="duaCustomMethod">
              <label
                for="duaFajrAngleInput"
                class="dua-input-label"
                data-translate="duaTimeCalculator.fajrAngle"
              >
                Fajr Angle:
              </label>
              <input
                type="number"
                id="duaFajrAngleInput"
                class="dua-input-field"
                placeholder="e.g., 18"
              />
              <label
                for="duaIshaAngleInput"
                class="dua-input-label"
                data-translate="duaTimeCalculator.ishaAngle"
              >
                Isha Angle:
              </label>
              <input
                type="number"
                id="duaIshaAngleInput"
                class="dua-input-field"
                placeholder="e.g., 17"
              />
            </div>
          </div>
        </div>
        <div class="dua-calculator-card">
          <h2
            class="dua-calculator-title"
            data-translate="duaTimeCalculator.manualAdjustments"
          >
            Manual Adjustments
          </h2>
          <div class="dua-calculator-content">
            <label
              for="duaManualFajrInput"
              class="dua-input-label"
              data-translate="duaTimeCalculator.fajrTime"
            >
              Fajr Time (HH:MM):
            </label>
            <input
              type="time"
              id="duaManualFajrInput"
              class="dua-input-field"
            />
            <label
              for="duaManualMaghribInput"
              class="dua-input-label"
              data-translate="duaTimeCalculator.maghribTime"
            >
              Maghrib Time (HH:MM):
            </label>
            <input
              type="time"
              id="duaManualMaghribInput"
              class="dua-input-field"
            />
            <button
              id="duaManualCalcBtn"
              class="dua-btn"
              data-action="calculate-dua-manually"
              data-translate="duaTimeCalculator.calculateManually"
            >
              Calculate Manually
            </button>
          </div>
        </div>
      </div>
      
      <!-- Résultats sortis des conteneurs pour plus d'espace -->
      <div class="dua-results-section">
        <h2 class="dua-section-title" data-translate="duaTimeCalculator.automaticResult">
          Automatic Calculation Result
        </h2>
        <div id="duaAutomaticResult" class="dua-result-box">
          <p id="duaAutoFajrTime"></p>
          <p id="duaAutoMaghribTime"></p>
          <p id="duaAutoIshaEnd"></p>
          <p id="duaAutoLastThird"></p>
        </div>
        
        <h2 class="dua-section-title" data-translate="duaTimeCalculator.manualResult">
          Manual Adjustments Result
        </h2>
        <div id="duaManualResult" class="dua-result-box">
          <p id="duaManualFajrTime"></p>
          <p id="duaManualMaghribTime"></p>
          <p id="duaManualIshaEnd"></p>
          <p id="duaManualLastThird"></p>
        </div>
      </div>
      </div>
      
    </section>

    <section id="price" class="page page-no-welcome">
      <div class="price-container">
        <h1 class="price-title" data-translate="price.title">
          Choose Your Contribution
        </h1>
        <div class="price-plans-container">
          <div class="price-card" id="price-free">
            <div class="price-card-header">
              <h2 class="price-card-title" data-translate="price.freeTitle">
                Free Plan
              </h2>
              <p
                class="price-card-description"
                data-translate="price.freeDescription"
              >
                Access all features without cost
              </p>
            </div>
            <div class="price-card-content">
              <p class="price-amount">
                <span data-translate="price.freePrice">$0</span
                ><span class="price-period" data-translate="price.period"
                  >/month</span
                >
              </p>
              <ul class="price-features-list">
                <li class="price-feature-item">
                  <span class="price-check-icon">✓</span>
                  <span data-translate="price.freeFeatures"
                    >Main platform features</span
                  >
                </li>
              </ul>
            </div>
            <div class="price-card-footer">
              <a href="#" class="price-button" data-translate="price.freeButton"
                >Get Started</a
              >
            </div>
          </div>
          <div class="price-card" id="price-normal">
            <div class="price-card-header">
              <h2
                class="price-card-title"
                data-translate="price.sustainerTitle"
              >
                Sustainer Plan
              </h2>
              <p
                class="price-card-description"
                data-translate="price.sustainerDescription"
              >
                Contribute to cover operational costs and ensure the platform
                remains available for everyone.
              </p>
            </div>
            <div class="price-card-content">
              <p class="price-amount">
                <span data-translate="price.sustainerPrice">$0</span
                ><span class="price-period" data-translate="price.period"
                  >/month</span
                >
              </p>
              <ul class="price-features-list">
                <li class="price-feature-item">
                  <span class="price-check-icon">✓</span>
                  <span data-translate="price.sustainerFeature1"
                    >Access to all the features</span
                  >
                </li>
                <li class="price-feature-item">
                  <span class="price-check-icon">✓</span>
                  <span data-translate="price.sustainerFeature2"
                    >Helps maintain platform sustainability by covering
                    essential operational costs</span
                  >
                </li>
                <li class="price-feature-item">
                  <span class="price-check-icon">✓</span>
                  <span data-translate="price.sustainerFeature3"
                    >Support our mission to keep the platform free and
                    accessible for all users</span
                  >
                </li>
                <li class="price-feature-item">
                  <span class="price-check-icon">✓</span>
                  <span data-translate="price.sustainerFeature4"
                    >Contribute to server and maintenance fees</span
                  >
                </li>
              </ul>
            </div>
            <div class="price-card-footer">
              <a
                href="#"
                class="price-button"
                data-translate="price.sustainerButton"
                >Contribute Now</a
              >
            </div>
          </div>
          <div class="price-card" id="price-generous">
            <div class="price-card-header">
              <h2
                class="price-card-title"
                data-translate="price.supporterTitle"
              >
                Supporter Plan
              </h2>
              <p
                class="price-card-description"
                data-translate="price.supporterDescription"
              >
                Help us grow, improve, and innovate by contributing beyond
                operational costs.
              </p>
            </div>
            <div class="price-card-content">
              <p class="price-amount">
                <span data-translate="price.supporterPrice">$0</span
                ><span class="price-period" data-translate="price.period"
                  >/month</span
                >
              </p>
              <ul class="price-features-list">
                <li class="price-feature-item">
                  <span class="price-check-icon">✓</span>
                  <span data-translate="price.supporterFeature1"
                    >Access to all the features</span
                  >
                </li>
                <li class="price-feature-item">
                  <span class="price-check-icon">✓</span>
                  <span data-translate="price.supporterFeature2"
                    >Supports platform development and growth, allowing us to
                    add new features and improve user experience</span
                  >
                </li>
                <li class="price-feature-item">
                  <span class="price-check-icon">✓</span>
                  <span data-translate="price.supporterFeature3"
                    >Contribute to our vision of creating a vibrant, innovative
                    platform that continuously evolves</span
                  >
                </li>
                <li class="price-feature-item">
                  <span class="price-check-icon">✓</span>
                  <span data-translate="price.supporterFeature4"
                    >Your generosity helps fund new initiatives and ensures the
                    long-term success of community projects</span
                  >
                </li>
                <li class="price-feature-item">
                  <span class="price-check-icon">✓</span>
                  <span data-translate="price.supporterFeature5"
                    >Priority access to new features and beta testing
                    opportunities</span
                  >
                </li>
                <li class="price-feature-item">
                  <span class="price-check-icon">✓</span>
                  <span data-translate="price.supporterFeature6"
                    >Recognition as a key supporter in our community</span
                  >
                </li>
                <li class="price-feature-item">
                  <span class="price-check-icon">✓</span>
                  <span data-translate="price.supporterFeature7"
                    >Exclusive content and insights into future
                    developments</span
                  >
                </li>
              </ul>
            </div>
            <div class="price-card-footer">
              <a
                href="#"
                class="price-button"
                data-translate="price.supporterButton"
                >Support Us</a
              >
            </div>
          </div>
        </div>
        <p class="price-footnote" data-translate="price.footnote">
          Thank you for considering supporting our platform. Your contributions
          help keep the platform open and continuously improve.
        </p>
      </div>
    </section>

    <section id="aboutus" class="page page-no-welcome">
      <div class="aboutus-wrapper">
        <h1 class="aboutus-title" data-translate="aboutus.title">
          About TalibHub
        </h1>

        <div class="aboutus-card" id="aboutus-mission">
          <div class="aboutus-card-header">
            <h2
              class="aboutus-card-title"
              data-translate="aboutus.missionTitle"
            >
              Our Mission
            </h2>
          </div>
          <div class="aboutus-card-content">
            <p data-translate="aboutus.missionContent">
              At TalibHub, our mission is to support the learning and practice
              of Islam on a daily basis. We offer Muslims worldwide modern and
              effective tools to deepen their faith and improve their religious
              practice.
            </p>
          </div>
        </div>

        <div class="aboutus-grid aboutus-grid-cols-2">
          <div class="aboutus-card" id="aboutus-features">
            <div class="aboutus-card-header">
              <h2
                class="aboutus-card-title"
                data-translate="aboutus.featuresTitle"
              >
                Our Features
              </h2>
            </div>
            <div class="aboutus-card-content">
              <ul class="aboutus-list">
                <li data-translate="aboutus.featureTalibTimer">
                  Talib Timer: Study time management with Pomodoro technique,
                  stopwatch, and counter
                </li>
                <li data-translate="aboutus.featureSurahSelector">
                  Surah Selector: Diversify your prayer surahs
                </li>
                <li data-translate="aboutus.featureSurahMemorization">
                  Surah Memorisation: Maintain surah memorisation
                </li>
                <li data-translate="aboutus.featureDuaTime">
                  Dua Time Calculator: Calculate the last third of the night for
                  invocations
                </li>
                <li data-translate="aboutus.featureMosquetime">
                  Mosquetime: Congregational prayer times at mosques
                </li>
              </ul>
            </div>
          </div>

          <div class="aboutus-card" id="aboutus-values">
            <div class="aboutus-card-header">
              <h2
                class="aboutus-card-title"
                data-translate="aboutus.valuesTitle"
              >
                Our Values
              </h2>
            </div>
            <div class="aboutus-card-content">
              <ul class="aboutus-list">
                <li data-translate="aboutus.valueCommitment">
                  Commitment to Islamic principles
                </li>
                <li data-translate="aboutus.valueInnovation">
                  Innovation in religious education
                </li>
                <li data-translate="aboutus.valueAccessibility">
                  Universal accessibility
                </li>
                <li data-translate="aboutus.valueCommunity">
                  Community development
                </li>
                <li data-translate="aboutus.valueImprovement">
                  Continuous improvement of our services
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="aboutus-card" id="aboutus-future">
          <div class="aboutus-card-header">
            <h2 class="aboutus-card-title" data-translate="aboutus.futureTitle">
              Our Future
            </h2>
          </div>
          <div class="aboutus-card-content">
            <p data-translate="aboutus.futureContent">
              TalibHub is constantly evolving. In Sha Allah, we plan to enrich
              our platform with many new innovative features to better serve our
              user community.
            </p>
          </div>
        </div>

        <div class="aboutus-card" id="aboutus-commitment">
          <div class="aboutus-card-header">
            <h2
              class="aboutus-card-title"
              data-translate="aboutus.commitmentTitle"
            >
              Our Commitment
            </h2>
          </div>
          <div class="aboutus-card-content">
            <p data-translate="aboutus.commitmentContent">
              TalibHub is committed to providing a free and accessible platform
              to everyone. Our unique model relies on the generosity of our
              users, with subscriptions designed for altruists who wish to
              contribute to the development and dissemination of the platform.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="contactform" class="page page-no-welcome">
      <h1 data-translate="contactform.title">Contact Us</h1>
      <div class="contactform-wrapper">
        <div class="contactform-container">
          <div class="contactform-left-column">
            <h2
              class="contactform-title"
              data-translate="contactform.talkAbout"
            >
              Let's talk<br />about something
              <span class="contactform-highlight">awesome</span><br />together
            </h2>
            <div class="contactform-info">
              <p class="contactform-info-item">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <line x1="22" y1="2" x2="11" y2="13"></line>
                  <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                </svg>
                support@talibhub.com
              </p>
              <div class="contactform-social-buttons">
                <button class="contactform-social-button">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path
                      d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"
                    ></path>
                  </svg>
                </button>
                <button class="contactform-social-button">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <rect
                      x="2"
                      y="2"
                      width="20"
                      height="20"
                      rx="5"
                      ry="5"
                    ></rect>
                    <path
                      d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"
                    ></path>
                    <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                  </svg>
                </button>
                <button class="contactform-social-button">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path
                      d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"
                    ></path>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script type="module" src="main.js"></script>
    <script type="module" src="services/auth/authService.js"></script>
    <script type="module" src="components/navigation/navigation.js"></script>
    <script type="module" src="components/user/profile.js"></script>
    <script type="module" src="components/timer/tasks.js"></script>
    <script type="module" src="components/timer/timer.js"></script>
    <script type="module" src="components/quran/surahSelector.js"></script>
    <script type="module" src="components/prayer/duaTimeCalculator.js"></script>
    <script type="module" src="components/mosqueTime/mosqueTime.js"></script>
    <script type="module" src="components/quran/surahMemorization.js"></script>
    <script type="module" src="components/messaging/messageCenter.js"></script>
    <script type="module" src="utils/utils.js"></script>
    <script type="module" src="components/auth/botTracker.js"></script>
    <script type="module" src="components/auth/oauth.js"></script>

    <script type="module" src="config/apiConfig.js"></script>
    <script type="module" src="services/api/dynamicLoader.js"></script>
    <script type="module" src="components/navigation/topnav.js"></script>
    <script type="module" src="components/statistics/statistics.js"></script>
    <script type="module" src="components/statistics/charts.js"></script>
    <script type="module" src="components/welcome/welcomePage.js"></script>
    <script type="module" src="services/state/state.js"></script>
    <script type="module" src="config/constants.js"></script>
    <script type="module" src="services/cache/cacheService.js"></script>
    <script type="module" src="services/cache/cacheCountries.js"></script>
    <script type="module" src="components/auth/terms.js"></script>
    <script type="module" src="utils/version.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Attendre un court instant pour s'assurer que Feather est chargé
        setTimeout(function () {
          if (window.feather && typeof window.feather.replace === "function") {
            window.feather.replace();
          }
        }, 50);
      });
    </script>
  </body>
</html>
